Guice Composites is an experimental extension to Guice. It tries to make it easy to use dependency injection as a sustained process that starts with the bootstrapping of the main singletons and continues on with the creation of shorter-lived object graphs.

A typical object application starts life as a main set of long-lived objects - the main singletons. Later these objects spawn shorter-lived object graphs. These graphs in turn spawn even shorter-lived graphs and so on. Each object generation combines both data obtained during the computation and references to objects of the older generations. Each generation is born, does some useful computation and is than destroyed and garbage collected. The main generation is special only with the fact that it lives the longest.

Typical as it is this model is not perfectly supported by Guice. Or rather Guice neither supports neither obstructs this model - it just provides the basic tools for dependency injection. With raw Guice it is is easy to bootstrap the initial set of objects. However after this it becomes harder to use dependency injection to spawn the shorter-lived object graphs. For a sustained creation process two elements seem to be required:

  * Injection of a factory-like object. This object provides type-safe means for current objects to call back into Guice to create new object graphs.
  * The usage of scopes. Scopes track, which objects belong to the older generations and must be reused, and which are of new generation and must be instantiated.

Currently Guice and it's extensions cover only the first of these aspects: injecting the Injector, injecting Providers, and injecting Guice-backed factories. As for scopes - if the developer is fortunate he can reuse scopes written for his particular class of application. However if your app is not covered or you need finer grained scopes you are out of luck. Especially given this quote from the [Guice wiki](http://code.google.com/p/google-guice/wiki/CustomScopes): It is generally recommended that users do not write their own custom scopes.

Guice Composites tries to cover both aspects of sustained dependency injection. It can be viewed as an elaboration of the [AssistedInject extension](http://code.google.com/p/google-guice/wiki/AssistedInject) and it's automated factory generation. Except factories Guice Composites also _generates scopes_. The generated scopes are suitable for OO apps that follow the multi-generation model outlined above. Before you exclaim that this seems like every last OO app on earth here is a small counter example: if your app must transfer ownership of an object from one graph to a sibling or a parent graph it is probably a bad idea to use a Guice Composites scope to manage this object. In this case it is better to implement a custom scoping strategy or keep the object unscoped.